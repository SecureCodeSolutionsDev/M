<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SCI v12.0 - BACKTEST & VALIDATION ENGINE</title>
    <style>
        :root { --bg: #000; --neon: #00ffcc; --danger: #ff3333; --panel: #0d0d0d; --backtest: #ffcc00; }
        body { background: var(--bg); color: #e0e0e0; font-family: 'Inter', sans-serif; margin: 0; padding: 20px; font-size: 11px; }
        .container { max-width: 1400px; margin: auto; }
        
        .header { display: flex; justify-content: space-between; align-items: flex-end; border-bottom: 2px solid #222; padding-bottom: 15px; margin-bottom: 20px; }
        .stat-card { background: var(--panel); border: 1px solid #222; padding: 12px; border-radius: 4px; text-align: center; min-width: 150px; }
        .stat-val { font-size: 22px; font-weight: bold; color: var(--neon); display: block; }

        /* BACKTEST UI */
        #backtest-sector { background: rgba(255, 204, 0, 0.05); border: 1px solid var(--backtest); padding: 20px; border-radius: 4px; margin-bottom: 20px; display: none; }
        .acc-score { font-size: 32px; color: var(--backtest); font-weight: bold; }
        
        .controls { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        button { background: #111; color: var(--neon); border: 1px solid var(--neon); padding: 12px; border-radius: 4px; cursor: pointer; font-weight: bold; text-transform: uppercase; }
        button.bt-btn { color: var(--backtest); border-color: var(--backtest); }

        table { width: 100%; border-collapse: collapse; background: var(--panel); }
        th { text-align: left; padding: 15px; background: #111; color: #666; font-size: 9px; text-transform: uppercase; }
        td { padding: 15px; border-bottom: 1px solid #1a1a1a; }

        #log { color: #444; font-family: monospace; text-align: center; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div>
            <h1 style="margin:0; font-size: 24px; letter-spacing: -1px;">SCI MASTER <span style="color:var(--neon)">v12.0</span></h1>
            <span style="color:#555">Backtest Validation & Accuracy Index | Feb 2026</span>
        </div>
        <div style="display:flex; gap:10px;">
            <div class="stat-card"><span id="avgAccuracy" class="stat-val" style="color:var(--backtest)">--%</span><span style="font-size:9px; color:#444">MODEL ACCURACY</span></div>
            <div class="stat-card"><span id="hitRate" class="stat-val">0/10</span><span style="font-size:9px; color:#444">DETECTION RATIO</span></div>
        </div>
    </div>

    <div id="backtest-sector">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <div>
                <h2 style="color:var(--backtest); margin:0;">HISTORICAL AUDIT: LAST 10 M6.0+ EVENTS</h2>
                <p style="color:#888;">Verifying if SCI algorithm signatures (AO Sync & Migration) preceded the rupture.</p>
            </div>
            <div class="acc-score" id="finalPercent">--%</div>
        </div>
        <div id="backtestResults" style="margin-top:15px; display:grid; grid-template-columns: repeat(5, 1fr); gap:10px;"></div>
    </div>

    <div class="controls">
        <button onclick="runLiveAnalysis()">Live Tension Scan</button>
        <button class="bt-btn" onclick="runBacktest()">Run 10-Event Backtest</button>
        <button onclick="window.print()">Export Audit</button>
    </div>

    <table id="mainTable">
        <thead>
            <tr>
                <th>Historical Event</th>
                <th>Magnitude</th>
                <th>Sync Status</th>
                <th>Mig. Index</th>
                <th>Result</th>
            </tr>
        </thead>
        <tbody id="backtestBody"></tbody>
    </table>

    <div id="log">Feb 2026 Core. Ready for solo developer validation.</div>
</div>

<script>
// Mock data for last 10 events (In a real app, this fetches from USGS /query?minmag=6)
const RECENT_EVENTS = [
    { loc: "Coquimbo, Chile", mag: 6.2, tiers: 5, mig: 4.2 },
    { loc: "Vanuatu", mag: 6.4, tiers: 6, mig: 5.1 },
    { loc: "Hawke's Bay, NZ", mag: 7.9, tiers: 6, mig: 3.8 },
    { loc: "Kachin, Myanmar", mag: 7.6, tiers: 4, mig: 6.2 },
    { loc: "Mindanao, PH", mag: 6.1, tiers: 5, mig: 1.1 },
    { loc: "Oaxaca, Mexico", mag: 8.0, tiers: 6, mig: 5.5 },
    { loc: "Honshu, Japan", mag: 6.0, tiers: 3, mig: -0.5 },
    { loc: "Turkey-Syria", mag: 6.3, tiers: 5, mig: 2.9 },
    { loc: "Java, Indonesia", mag: 6.5, tiers: 6, mig: 4.0 },
    { loc: "Alaska Coast", mag: 6.2, tiers: 2, mig: 0.2 }
];

function runBacktest() {
    document.getElementById('backtest-sector').style.display = 'block';
    const body = document.getElementById('backtestBody');
    const logs = document.getElementById('backtestResults');
    body.innerHTML = "";
    logs.innerHTML = "";
    
    let totalScore = 0;
    let hits = 0;

    RECENT_EVENTS.forEach((ev, i) => {
        // SCORING LOGIC
        // Max Sync (6) + Max Mig (5+) = 100% accuracy
        let score = (ev.tiers / 6) * 70; // 70% weight to Sync
        score += (Math.min(ev.mig, 5) / 5) * 30; // 30% weight to Migration
        if(score > 75) hits++;
        totalScore += score;

        const row = document.createElement('tr');
        row.innerHTML = `
            <td><strong>${ev.loc}</strong></td>
            <td>M${ev.mag}</td>
            <td>${ev.tiers}/6 Sync</td>
            <td>${ev.mig > 0 ? 'â†‘' : ''}${ev.mig.toFixed(1)}km</td>
            <td style="color:${score > 75 ? '#00ffcc' : (score > 40 ? '#ffcc00' : '#ff3333')}">
                ${score.toFixed(0)}% Match
            </td>
        `;
        body.appendChild(row);

        const card = document.createElement('div');
        card.style = `background:#111; padding:10px; border:1px solid ${score > 75 ? '#00ffcc' : '#333'}; text-align:center;`;
        card.innerHTML = `<span style="font-size:9px; color:#555">EVENT ${i+1}</span><br><span style="color:${score > 75 ? '#00ffcc' : '#fff'}">${score.toFixed(0)}%</span>`;
        logs.appendChild(card);
    });

    const avg = totalScore / 10;
    document.getElementById('avgAccuracy').innerText = avg.toFixed(1) + "%";
    document.getElementById('finalPercent').innerText = avg.toFixed(1) + "%";
    document.getElementById('hitRate').innerText = hits + "/10";
    document.getElementById('log').innerText = "Backtest Complete. Reliability Index calculated.";
}

function runLiveAnalysis() {
    alert("Reverting to Live v11.0 Mode. Scan initialized.");
}
</script>
</body>
</html>
